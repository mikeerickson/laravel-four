/*!
 * FullCalendar v1.6.2
 * Docs & License: http://arshaw.com/fullcalendar/
 * (c) 2013 Adam Shaw
 */(function(e,t){function n(t){e.extend(!0,vt,t)}function r(n,r,f){function l(e){Y?(T(),x(),D(),E(e)):c()}function c(){Z=r.theme?"ui":"fc",n.addClass("fc"),r.isRTL?n.addClass("fc-rtl"):n.addClass("fc-ltr"),r.theme&&n.addClass("ui-widget"),Y=e("<div class='fc-content' style='position:relative'/>").prependTo(n),Q=new i(K,r),G=Q.render(),G&&n.prepend(G),y(r.defaultView),e(window).resize(C),g()||p()}function p(){setTimeout(function(){!et.start&&g()&&E()},0)}function d(){e(window).unbind("resize",C),Q.destroy(),Y.remove(),n.removeClass("fc fc-rtl ui-widget")}function m(){return 0!==ut.offsetWidth}function g(){return 0!==e("body")[0].offsetWidth}function y(t){if(!et||t!=et.name){lt++,j();var n,r=et;r?((r.beforeHide||B)(),H(Y,Y.height()),r.element.hide()):H(Y,1),Y.css("overflow","hidden"),et=at[t],et?et.element.show():et=at[t]=new yt[t](n=rt=e("<div class='fc-view fc-view-"+t+"' style='position:absolute'/>").appendTo(Y),K),r&&Q.deactivateButton(r.name),Q.activateButton(t),E(),Y.css("overflow",""),r&&H(Y,1),n||(et.afterShow||B)(),lt--}}function E(e){if(m()){lt++,j(),nt===t&&T();var r=!1;!et.start||e||et.start>ct||ct>=et.end?(et.render(ct,e||0),N(!0),r=!0):et.sizeDirty?(et.clearEvents(),N(),r=!0):et.eventsDirty&&(et.clearEvents(),r=!0),et.sizeDirty=!1,et.eventsDirty=!1,k(r),tt=n.outerWidth(),Q.updateTitle(et.title);var i=new Date;i>=et.start&&et.end>i?Q.disableButton("today"):Q.enableButton("today"),lt--,et.trigger("viewDisplay",ut)}}function S(){x(),m()&&(T(),N(),j(),et.clearEvents(),et.renderEvents(ht),et.sizeDirty=!1)}function x(){e.each(at,function(e,t){t.sizeDirty=!0})}function T(){nt=r.contentHeight?r.contentHeight:r.height?r.height-(G?G.height():0)-M(Y):Math.round(Y.width()/Math.max(r.aspectRatio,.5))}function N(e){lt++,et.setHeight(nt,e),rt&&(rt.css("position","relative"),rt=null),et.setWidth(Y.width(),e),lt--}function C(){if(!lt)if(et.start){var e=++ft;setTimeout(function(){e==ft&&!lt&&m()&&tt!=(tt=n.outerWidth())&&(lt++,S(),et.trigger("windowResize",ut),lt--)},200)}else p()}function k(e){!r.lazyFetching||st(et.visStart,et.visEnd)?L():e&&_()}function L(){ot(et.visStart,et.visEnd)}function A(e){ht=e,_()}function O(e){_(e)}function _(e){D(),m()&&(et.clearEvents(),et.renderEvents(ht,e),et.eventsDirty=!1)}function D(){e.each(at,function(e,t){t.eventsDirty=!0})}function P(e,n,r){et.select(e,n,r===t?!0:r)}function j(){et&&et.unselect()}function F(){E(-1)}function I(){E(1)}function q(){o(ct,-1),E()}function R(){o(ct,1),E()}function U(){ct=new Date,E()}function z(e,t,n){e instanceof Date?ct=h(e):v(ct,e,t,n),E()}function W(e,n,r){e!==t&&o(ct,e),n!==t&&u(ct,n),r!==t&&a(ct,r),E()}function X(){return h(ct)}function V(){return et}function $(e,n){return n===t?r[e]:(("height"==e||"contentHeight"==e||"aspectRatio"==e)&&(r[e]=n,S()),t)}function J(e,n){return r[e]?r[e].apply(n||ut,Array.prototype.slice.call(arguments,2)):t}var K=this;K.options=r,K.render=l,K.destroy=d,K.refetchEvents=L,K.reportEvents=A,K.reportEventChange=O,K.rerenderEvents=_,K.changeView=y,K.select=P,K.unselect=j,K.prev=F,K.next=I,K.prevYear=q,K.nextYear=R,K.today=U,K.gotoDate=z,K.incrementDate=W,K.formatDate=function(e,t){return b(e,t,r)},K.formatDates=function(e,t,n){return w(e,t,n,r)},K.getDate=X,K.getView=V,K.option=$,K.trigger=J,s.call(K,r,f);var Q,G,Y,Z,et,tt,nt,rt,it,st=K.isFetchNeeded,ot=K.fetchEvents,ut=n[0],at={},ft=0,lt=0,ct=new Date,ht=[];v(ct,r.year,r.month,r.date),r.droppable&&e(document).bind("dragstart",function(t,n){var i=t.target,s=e(i);if(!s.parents(".fc").length){var o=r.dropAccept;(e.isFunction(o)?o.call(i,s):s.is(o))&&(it=i,et.dragStart(it,t,n))}}).bind("dragstop",function(e,t){it&&(et.dragStop(it,e,t),it=null)})}function i(n,r){function i(){p=r.theme?"ui":"fc";var n=r.header;return n?d=e("<table class='fc-header' style='width:100%'/>").append(e("<tr/>").append(o("left")).append(o("center")).append(o("right"))):t}function s(){d.remove()}function o(t){var i=e("<td class='fc-header-"+t+"'/>"),s=r.header[t];return s&&e.each(s.split(" "),function(t){t>0&&i.append("<span class='fc-header-space'/>");var s;e.each(this.split(","),function(t,o){if("title"==o)i.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),s&&s.addClass(p+"-corner-right"),s=null;else{var u;if(n[o]?u=n[o]:yt[o]&&(u=function(){l.removeClass(p+"-state-hover"),n.changeView(o)}),u){var a=r.theme?q(r.buttonIcons,o):null,f=q(r.buttonText,o),l=e("<span class='fc-button fc-button-"+o+" "+p+"-state-default'>"+(a?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+a+"'/>"+"</span>":f)+"</span>").click(function(){l.hasClass(p+"-state-disabled")||u()}).mousedown(function(){l.not("."+p+"-state-active").not("."+p+"-state-disabled").addClass(p+"-state-down")}).mouseup(function(){l.removeClass(p+"-state-down")}).hover(function(){l.not("."+p+"-state-active").not("."+p+"-state-disabled").addClass(p+"-state-hover")},function(){l.removeClass(p+"-state-hover").removeClass(p+"-state-down")}).appendTo(i);U(l),s||l.addClass(p+"-corner-left"),s=l}}}),s&&s.addClass(p+"-corner-right")}),i}function u(e){d.find("h2").html(e)}function a(e){d.find("span.fc-button-"+e).addClass(p+"-state-active")}function f(e){d.find("span.fc-button-"+e).removeClass(p+"-state-active")}function l(e){d.find("span.fc-button-"+e).addClass(p+"-state-disabled")}function c(e){d.find("span.fc-button-"+e).removeClass(p+"-state-disabled")}var h=this;h.render=i,h.destroy=s,h.updateTitle=u,h.activateButton=a,h.deactivateButton=f,h.disableButton=l,h.enableButton=c;var p,d=e([])}function s(n,r){function i(e,t){return!T||T>e||t>N}function s(e,t){T=e,N=t,P=[];var n=++M,r=O.length;_=r;for(var i=0;r>i;i++)o(O[i],n)}function o(t,r){u(t,function(i){if(r==M){if(i){n.eventDataTransform&&(i=e.map(i,n.eventDataTransform)),t.eventDataTransform&&(i=e.map(i,t.eventDataTransform));for(var s=0;i.length>s;s++)i[s].source=t,b(i[s]);P=P.concat(i)}_--,_||L(P)}})}function u(r,i){var s,o,a=gt.sourceFetchers;for(s=0;a.length>s;s++){if(o=a[s](r,T,N,i),o===!0)return;if("object"==typeof o)return u(o,i),t}var f=r.events;if(f)e.isFunction(f)?(g(),f(h(T),h(N),function(e){i(e),y()})):e.isArray(f)?i(f):i();else{var l=r.url;if(l){var c=r.success,p=r.error,d=r.complete,v=e.extend({},r.data||{}),m=V(r.startParam,n.startParam),b=V(r.endParam,n.endParam);m&&(v[m]=Math.round(+T/1e3)),b&&(v[b]=Math.round(+N/1e3)),g(),e.ajax(e.extend({},bt,r,{data:v,success:function(t){t=t||[];var n=X(c,this,arguments);e.isArray(n)&&(t=n),i(t)},error:function(){X(p,this,arguments),i()},complete:function(){X(d,this,arguments),y()}}))}else i()}}function a(e){e=f(e),e&&(_++,o(e,M))}function f(n){return e.isFunction(n)||e.isArray(n)?n={events:n}:"string"==typeof n&&(n={url:n}),"object"==typeof n?(w(n),O.push(n),n):t}function l(t){O=e.grep(O,function(e){return!E(e,t)}),P=e.grep(P,function(e){return!E(e.source,t)}),L(P)}function c(e){var t,n,r=P.length,i=k().defaultEventEnd,s=e.start-e._start,o=e.end?e.end-(e._end||i(e)):0;for(t=0;r>t;t++)n=P[t],n._id==e._id&&n!=e&&(n.start=new Date(+n.start+s),n.end=e.end?n.end?new Date(+n.end+o):new Date(+i(n)+o):null,n.title=e.title,n.url=e.url,n.allDay=e.allDay,n.className=e.className,n.editable=e.editable,n.color=e.color,n.backgroundColor=e.backgroundColor,n.borderColor=e.borderColor,n.textColor=e.textColor,b(n));b(e),L(P)}function p(e,t){b(e),e.source||(t&&(A.events.push(e),e.source=A),P.push(e)),L(P)}function d(t){if(t){if(!e.isFunction(t)){var n=t+"";t=function(e){return e._id==n}}P=e.grep(P,t,!0);for(var r=0;O.length>r;r++)e.isArray(O[r].events)&&(O[r].events=e.grep(O[r].events,t,!0))}else{P=[];for(var r=0;O.length>r;r++)e.isArray(O[r].events)&&(O[r].events=[])}L(P)}function v(t){return e.isFunction(t)?e.grep(P,t):t?(t+="",e.grep(P,function(e){return e._id==t})):P}function g(){D++||C("loading",null,!0)}function y(){--D||C("loading",null,!1)}function b(e){var r=e.source||{},i=V(r.ignoreTimezone,n.ignoreTimezone);e._id=e._id||(e.id===t?"_fc"+wt++:e.id+""),e.date&&(e.start||(e.start=e.date),delete e.date),e._start=h(e.start=m(e.start,i)),e.end=m(e.end,i),e.end&&e.end<=e.start&&(e.end=null),e._end=e.end?h(e.end):null,e.allDay===t&&(e.allDay=V(r.allDayDefault,n.allDayDefault)),e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[]}function w(e){e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[];for(var t=gt.sourceNormalizers,n=0;t.length>n;n++)t[n](e)}function E(e,t){return e&&t&&S(e)==S(t)}function S(e){return("object"==typeof e?e.events||e.url:"")||e}var x=this;x.isFetchNeeded=i,x.fetchEvents=s,x.addEventSource=a,x.removeEventSource=l,x.updateEvent=c,x.renderEvent=p,x.removeEvents=d,x.clientEvents=v,x.normalizeEvent=b;for(var T,N,C=x.trigger,k=x.getView,L=x.reportEvents,A={events:[]},O=[A],M=0,_=0,D=0,P=[],H=0;r.length>H;H++)f(r[H])}function o(e,t,n){return e.setFullYear(e.getFullYear()+t),n||c(e),e}function u(e,t,n){if(+e){var r=e.getMonth()+t,i=h(e);for(i.setDate(1),i.setMonth(r),e.setMonth(r),n||c(e);e.getMonth()!=i.getMonth();)e.setDate(e.getDate()+(i>e?1:-1))}return e}function a(e,t,n){if(+e){var r=e.getDate()+t,i=h(e);i.setHours(9),i.setDate(r),e.setDate(r),n||c(e),f(e,i)}return e}function f(e,t){if(+e)for(;e.getDate()!=t.getDate();)e.setTime(+e+(t>e?1:-1)*xt)}function l(e,t){return e.setMinutes(e.getMinutes()+t),e}function c(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e}function h(e,t){return t?c(new Date(+e)):new Date(+e)}function p(){var e,t=0;do e=new Date(1970,t++,1);while(e.getHours());return e}function d(e,t){return Math.round((h(e,!0)-h(t,!0))/St)}function v(e,n,r,i){n!==t&&n!=e.getFullYear()&&(e.setDate(1),e.setMonth(0),e.setFullYear(n)),r!==t&&r!=e.getMonth()&&(e.setDate(1),e.setMonth(r)),i!==t&&e.setDate(i)}function m(e,n){return"object"==typeof e?e:"number"==typeof e?new Date(1e3*e):"string"==typeof e?e.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(e)):(n===t&&(n=!0),g(e,n)||(e?new Date(e):null)):null}function g(e,t){var n=e.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!n)return null;var r=new Date(n[1],0,1);if(t||!n[13]){var i=new Date(n[1],0,1,9,0);n[3]&&(r.setMonth(n[3]-1),i.setMonth(n[3]-1)),n[5]&&(r.setDate(n[5]),i.setDate(n[5])),f(r,i),n[7]&&r.setHours(n[7]),n[8]&&r.setMinutes(n[8]),n[10]&&r.setSeconds(n[10]),n[12]&&r.setMilliseconds(1e3*Number("0."+n[12])),f(r,i)}else if(r.setUTCFullYear(n[1],n[3]?n[3]-1:0,n[5]||1),r.setUTCHours(n[7]||0,n[8]||0,n[10]||0,n[12]?1e3*Number("0."+n[12]):0),n[14]){var s=60*Number(n[16])+(n[18]?Number(n[18]):0);s*="-"==n[15]?1:-1,r=new Date(+r+6e4*s)}return r}function y(e){if("number"==typeof e)return 60*e;if("object"==typeof e)return 60*e.getHours()+e.getMinutes();var t=e.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(t){var n=parseInt(t[1],10);return t[3]&&(n%=12,"p"==t[3].toLowerCase().charAt(0)&&(n+=12)),60*n+(t[2]?parseInt(t[2],10):0)}}function b(e,t,n){return w(e,null,t,n)}function w(e,t,n,r){r=r||vt;var i,s,o,u,a=e,f=t,l=n.length,c="";for(i=0;l>i;i++)if(s=n.charAt(i),"'"==s){for(o=i+1;l>o;o++)if("'"==n.charAt(o)){a&&(c+=o==i+1?"'":n.substring(i+1,o),i=o);break}}else if("("==s){for(o=i+1;l>o;o++)if(")"==n.charAt(o)){var h=b(a,n.substring(i+1,o),r);parseInt(h.replace(/\D/,""),10)&&(c+=h),i=o;break}}else if("["==s){for(o=i+1;l>o;o++)if("]"==n.charAt(o)){var p=n.substring(i+1,o),h=b(a,p,r);h!=b(f,p,r)&&(c+=h),i=o;break}}else if("{"==s)a=t,f=e;else if("}"==s)a=e,f=t;else{for(o=l;o>i;o--)if(u=Nt[n.substring(i,o)]){a&&(c+=u(a,r)),i=o-1;break}o==i&&a&&(c+=s)}return c}function E(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1}function S(e){return e.end?x(e.end,e.allDay):a(h(e.start),1)}function x(e,t){return e=h(e),t||e.getHours()||e.getMinutes()?a(e,1):c(e)}function T(n,r,i){n.unbind("mouseover").mouseover(function(n){for(var s,o,u,a=n.target;a!=this;)s=a,a=a.parentNode;(o=s._fci)!==t&&(s._fci=t,u=r[o],i(u.event,u.element,u),e(n.target).trigger(n)),n.stopPropagation()})}function N(t,n,r){for(var i,s=0;t.length>s;s++)i=e(t[s]),i.width(Math.max(0,n-k(i,r)))}function C(t,n,r){for(var i,s=0;t.length>s;s++)i=e(t[s]),i.height(Math.max(0,n-M(i,r)))}function k(e,t){return L(e)+O(e)+(t?A(e):0)}function L(t){return(parseFloat(e.css(t[0],"paddingLeft",!0))||0)+(parseFloat(e.css(t[0],"paddingRight",!0))||0)}function A(t){return(parseFloat(e.css(t[0],"marginLeft",!0))||0)+(parseFloat(e.css(t[0],"marginRight",!0))||0)}function O(t){return(parseFloat(e.css(t[0],"borderLeftWidth",!0))||0)+(parseFloat(e.css(t[0],"borderRightWidth",!0))||0)}function M(e,t){return _(e)+P(e)+(t?D(e):0)}function _(t){return(parseFloat(e.css(t[0],"paddingTop",!0))||0)+(parseFloat(e.css(t[0],"paddingBottom",!0))||0)}function D(t){return(parseFloat(e.css(t[0],"marginTop",!0))||0)+(parseFloat(e.css(t[0],"marginBottom",!0))||0)}function P(t){return(parseFloat(e.css(t[0],"borderTopWidth",!0))||0)+(parseFloat(e.css(t[0],"borderBottomWidth",!0))||0)}function H(e,t){t="number"==typeof t?t+"px":t,e.each(function(e,n){n.style.cssText+=";min-height:"+t+";_height:"+t})}function B(){}function j(e,t){return e-t}function F(e){return Math.max.apply(Math,e)}function I(e){return(10>e?"0":"")+e}function q(e,n){if(e[n]!==t)return e[n];for(var r,i=n.split(/(?=[A-Z])/),s=i.length-1;s>=0;s--)if(r=e[i[s].toLowerCase()],r!==t)return r;return e[""]}function R(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function U(e){e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function z(e){e.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function W(e,t){var n=e.source||{},r=e.color,i=n.color,s=t("eventColor"),o=e.backgroundColor||r||n.backgroundColor||i||t("eventBackgroundColor")||s,u=e.borderColor||r||n.borderColor||i||t("eventBorderColor")||s,a=e.textColor||n.textColor||t("eventTextColor"),f=[];return o&&f.push("background-color:"+o),u&&f.push("border-color:"+u),a&&f.push("color:"+a),f.join(";")}function X(t,n,r){if(e.isFunction(t)&&(t=[t]),t){var i,s;for(i=0;t.length>i;i++)s=t[i].apply(n,r)||s;return s}}function V(){for(var e=0;arguments.length>e;e++)if(arguments[e]!==t)return arguments[e]}function $(e,t){function n(e,t){t&&(u(e,t),e.setDate(1));var n=i("firstDay"),c=h(e,!0);c.setDate(1);var p=u(h(c),1),v=h(c);a(v,-((v.getDay()-n+7)%7)),o(v);var m=h(p);a(m,(7-m.getDay()+n)%7),o(m,-1,!0);var g=f(),y=Math.round(d(m,v)/7);"fixed"==i("weekMode")&&(a(m,7*(6-y)),y=6),r.title=l(c,i("titleFormat")),r.start=c,r.end=p,r.visStart=v,r.visEnd=m,s(y,g,!0)}var r=this;r.render=n,Q.call(r,e,t,"month");var i=r.opt,s=r.renderBasic,o=r.skipHiddenDays,f=r.getCellsPerWeek,l=t.formatDate}function J(e,t){function n(e,t){t&&a(e,7*t);var n=a(h(e),-((e.getDay()-i("firstDay")+7)%7)),l=a(h(n),7),c=h(n);o(c);var p=h(l);o(p,-1,!0);var d=u();r.start=n,r.end=l,r.visStart=c,r.visEnd=p,r.title=f(c,a(h(p),-1),i("titleFormat")),s(1,d,!1)}var r=this;r.render=n,Q.call(r,e,t,"basicWeek");var i=r.opt,s=r.renderBasic,o=r.skipHiddenDays,u=r.getCellsPerWeek,f=t.formatDates}function K(e,t){function n(e,t){t&&a(e,t),o(e,0>t?-1:1);var n=h(e,!0),f=a(h(n),1);r.title=u(e,i("titleFormat")),r.start=r.visStart=n,r.end=r.visEnd=f,s(1,1,!1)}var r=this;r.render=n,Q.call(r,e,t,"basicDay");var i=r.opt,s=r.renderBasic,o=r.skipHiddenDays,u=t.formatDate}function Q(t,n,r){function i(e,t,n){it=e,ot=t,ut=n,s();var r=!V;r?o():Nt(),u()}function s(){gt=xt("theme")?"ui":"fc",yt=xt("columnFormat"),bt=xt("weekNumbers"),wt=xt("weekNumberTitle"),St="iso"!=xt("weekNumberCalculation")?"w":"W"}function o(){Z=e("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(t)}function u(){var n=f();j(),q&&q.remove(),q=e(n).appendTo(t),W=q.find("thead"),X=W.find(".fc-day-header"),V=q.find("tbody"),$=V.find("tr"),J=V.find(".fc-day"),K=$.find("td:first-child"),Q=$.eq(0).find(".fc-day > div"),Y=$.eq(0).find(".fc-day-content > div"),z(W.add(W.find("tr"))),z($),$.eq(0).addClass("fc-first"),$.filter(":last").addClass("fc-last"),J.each(function(t,n){var r=At(Math.floor(t/ot),t%ot);Tt("dayRender",I,r,e(n))}),y(J)}function f(){var e="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+l()+p()+"</table>";return e}function l(){var e,t,n=gt+"-widget-header",r="";for(r+="<thead><tr>",bt&&(r+="<th class='fc-week-number "+n+"'>"+R(wt)+"</th>"),e=0;ot>e;e++)t=At(0,e),r+="<th class='fc-day-header fc-"+Et[t.getDay()]+" "+n+"'>"+R(_t(t,yt))+"</th>";return r+="</tr></thead>"}function p(){var e,t,n,r=gt+"-widget-content",i="";for(i+="<tbody>",e=0;it>e;e++){for(i+="<tr class='fc-week'>",bt&&(n=At(e,0),i+="<td class='fc-week-number "+r+"'>"+"<div>"+R(_t(n,St))+"</div>"+"</td>"),t=0;ot>t;t++)n=At(e,t),i+=d(n);i+="</tr>"}return i+="</tbody>"}function d(e){var t=gt+"-widget-content",n=I.start.getMonth(),r=c(new Date),i="",s=["fc-day","fc-"+Et[e.getDay()],t];return e.getMonth()!=n&&s.push("fc-other-month"),+e==+r&&s.push("fc-today",gt+"-state-highlight"),i+="<td class='"+s.join(" ")+"'"+" data-date='"+_t(e,"yyyy-MM-dd")+"'"+">"+"<div>",ut&&(i+="<div class='fc-day-number'>"+e.getDate()+"</div>"),i+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}function v(t){tt=t;var n,r,i,s=tt-W.height();"variable"==xt("weekMode")?n=r=Math.floor(s/(1==it?2:6)):(n=Math.floor(s/it),r=s-n*(it-1)),K.each(function(t,s){it>t&&(i=e(s),H(i.find("> div"),(t==it-1?r:n)-M(i)))}),F()}function m(e){et=e,vt.clear(),mt.clear(),rt=0,bt&&(rt=W.find("th.fc-week-number").outerWidth()),nt=Math.floor((et-rt)/ot),N(X.slice(0,-1),nt)}function y(e){e.click(b).mousedown(Lt)}function b(t){if(!xt("selectable")){var n=g(e(this).data("date"));Tt("dayClick",this,n,!0,t)}}function w(e,t,n){n&&at.build();for(var r=Mt(e,t),i=0;r.length>i;i++){var s=r[i];y(E(s.row,s.leftCol,s.row,s.rightCol))}}function E(e,n,r,i){var s=at.rect(e,n,r,i,t);return Ct(s,t)}function S(e){return h(e)}function x(e,t){w(e,a(h(t),1),!0)}function T(){kt()}function C(e,t,n){var r=Ot(e),i=J[r.row*ot+r.col];Tt("dayClick",i,e,t,n)}function k(e,t){pt.start(function(e){kt(),e&&E(e.row,e.col,e.row,e.col)},t)}function L(e,t,n){var r=pt.stop();if(kt(),r){var i=At(r);Tt("drop",e,i,!0,t,n)}}function A(e){return h(e.start)}function O(e){return vt.left(e)}function _(e){return vt.right(e)}function D(e){return mt.left(e)}function P(e){return mt.right(e)}function B(e){return $.eq(e)}function j(){H(t,t.height())}function F(){H(t,1)}var I=this;I.renderBasic=i,I.setHeight=v,I.setWidth=m,I.renderDayOverlay=w,I.defaultSelectionEnd=S,I.renderSelection=x,I.clearSelection=T,I.reportDayClick=C,I.dragStart=k,I.dragStop=L,I.defaultEventEnd=A,I.getHoverListener=function(){return pt},I.colLeft=O,I.colRight=_,I.colContentLeft=D,I.colContentRight=P,I.getIsCellAllDay=function(){return!0},I.allDayRow=B,I.getRowCnt=function(){return it},I.getColCnt=function(){return ot},I.getColWidth=function(){return nt},I.getDaySegmentContainer=function(){return Z},st.call(I,t,n,r),lt.call(I),ft.call(I),G.call(I);var q,W,X,V,$,J,K,Q,Y,Z,et,tt,nt,rt,it,ot,ut,at,pt,vt,mt,gt,yt,bt,wt,St,xt=I.opt,Tt=I.trigger,Nt=I.clearEvents,Ct=I.renderOverlay,kt=I.clearOverlays,Lt=I.daySelectionMousedown,At=I.cellToDate,Ot=I.dateToCell,Mt=I.rangeToSegments,_t=n.formatDate;U(t.addClass("fc-grid")),at=new ct(function(t,n){var r,i,s;X.each(function(t,o){r=e(o),i=r.offset().left,t&&(s[1]=i),s=[i],n[t]=s}),s[1]=i+r.outerWidth(),$.each(function(n,o){it>n&&(r=e(o),i=r.offset().top,n&&(s[1]=i),s=[i],t[n]=s)}),s[1]=i+r.outerHeight()}),pt=new ht(at),vt=new dt(function(e){return Q.eq(e)}),mt=new dt(function(e){return Y.eq(e)})}function G(){function e(e,t){n.reportEvents(e),n.renderDayEvents(e,t),n.trigger("eventAfterAllRender")}function t(){n.reportEventClear(),n.getDaySegmentContainer().empty()}var n=this;n.renderEvents=e,n.clearEvents=t,ot.call(n)}function Y(e,t){function n(e,t){t&&a(e,7*t);var n=a(h(e),-((e.getDay()-i("firstDay")+7)%7)),l=a(h(n),7),c=h(n);o(c);var p=h(l);o(p,-1,!0);var d=u();r.title=f(c,a(h(p),-1),i("titleFormat")),r.start=n,r.end=l,r.visStart=c,r.visEnd=p,s(d)}var r=this;r.render=n,et.call(r,e,t,"agendaWeek");var i=r.opt,s=r.renderAgenda,o=r.skipHiddenDays,u=r.getCellsPerWeek,f=t.formatDates}function Z(e,t){function n(e,t){t&&a(e,t),o(e,0>t?-1:1);var n=h(e,!0),f=a(h(n),1);r.title=u(e,i("titleFormat")),r.start=r.visStart=n,r.end=r.visEnd=f,s(1)}var r=this;r.render=n,et.call(r,e,t,"agendaDay");var i=r.opt,s=r.renderAgenda,o=r.skipHiddenDays,u=t.formatDate}function et(n,r,i){function s(e){Bt=e,o(),et?(f(),Zt()):u()}function o(){zt=Gt("theme")?"ui":"fc",Wt=Gt("isRTL"),Xt=y(Gt("minTime")),Vt=y(Gt("maxTime")),$t=Gt("columnFormat"),Jt=Gt("weekNumbers"),Kt=Gt("weekNumberTitle"),Qt="iso"!=Gt("weekNumberCalculation")?"w":"W",Dt=Gt("snapMinutes")||Gt("slotMinutes")}function u(){var t,r,i,s,o,u=zt+"-widget-header",a=zt+"-widget-content",c=0==Gt("slotMinutes")%15;for(f(),mt=e("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(n),Gt("allDaySlot")?(gt=e("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(mt),t="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+u+" fc-agenda-axis'>"+Gt("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+u+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",yt=e(t).appendTo(mt),bt=yt.find("tr"),x(bt.find("td")),mt.append("<div class='fc-agenda-divider "+u+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):gt=e([]),wt=e("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(mt),St=e("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(wt),xt=e("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(St),t="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",r=p(),s=l(h(r),Vt),l(r,Xt),jt=0,i=0;s>r;i++)o=r.getMinutes(),t+="<tr class='fc-slot"+i+" "+(o?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+u+"'>"+(c&&o?"&nbsp;":ln(r,Gt("axisFormat")))+"</th>"+"<td class='"+a+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",l(r,Gt("slotMinutes")),jt++;t+="</tbody></table>",Tt=e(t).appendTo(St),Nt=Tt.find("div:first"),T(Tt.find("td"))}function f(){var t=d();et&&et.remove(),et=e(t).appendTo(n),nt=et.find("thead"),rt=nt.find("th").slice(1,-1),it=et.find("tbody"),ot=it.find("td").slice(0,-1),ut=ot.find("> div"),at=ot.find(".fc-day-content > div"),pt=ot.eq(0),vt=ut.eq(0),z(nt.add(nt.find("tr"))),z(it.add(it.find("tr")))}function d(){var e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+v()+m()+"</table>";return e}function v(){var e,t,n,r=zt+"-widget-header",i="";for(i+="<thead><tr>",Jt?(t=ln(e,Qt),Wt?t+=Kt:t=Kt+t,i+="<th class='fc-agenda-axis fc-week-number "+r+"'>"+R(t)+"</th>"):i+="<th class='fc-agenda-axis "+r+"'>&nbsp;</th>",n=0;Bt>n;n++)e=un(0,n),i+="<th class='fc-"+Et[e.getDay()]+" fc-col"+n+" "+r+"'>"+R(ln(e,$t))+"</th>";return i+="<th class='fc-agenda-gutter "+r+"'>&nbsp;</th>"+"</tr>"+"</thead>"}function m(){var e,t,n,r,i,s=zt+"-widget-header",o=zt+"-widget-content",u=c(new Date),a="";for(a+="<tbody><tr><th class='fc-agenda-axis "+s+"'>&nbsp;</th>",n="",t=0;Bt>t;t++)e=un(0,t),i=["fc-col"+t,"fc-"+Et[e.getDay()],o],+e==+u&&i.push(zt+"-state-highlight","fc-today"),r="<td class='"+i.join(" ")+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>",n+=r;return a+=n,a+="<td class='fc-agenda-gutter "+o+"'>&nbsp;</td>"+"</tr>"+"</tbody>"}function g(e,n){e===t&&(e=Lt),Lt=e,cn={};var r=it.position().top,i=wt.position().top,s=Math.min(e-r,Tt.height()+i+1);vt.height(s-M(pt)),mt.css("top",r),wt.height(s-i-1),_t=Nt.height()+1,Pt=Gt("slotMinutes")/Dt,Ht=_t/Pt,n&&w()}function b(t){kt=t,qt.clear(),Rt.clear();var n=nt.find("th:first");yt&&(n=n.add(yt.find("th:first"))),n=n.add(Tt.find("th:first")),At=0,N(n.width("").each(function(t,n){At=Math.max(At,e(n).outerWidth())}),At);var r=et.find(".fc-agenda-gutter");yt&&(r=r.add(yt.find("th.fc-agenda-gutter")));var i=wt[0].clientWidth;Mt=wt.width()-i,Mt?(N(r,Mt),r.show().prev().removeClass("fc-last")):r.hide().prev().addClass("fc-last"),Ot=Math.floor((i-At)/Bt),N(rt.slice(0,-1),Ot)}function w(){function e(){wt.scrollTop(r)}var t=p(),n=h(t);n.setHours(Gt("firstHour"));var r=I(t,n)+1;e(),setTimeout(e,0)}function E(){Ut=wt.scrollTop()}function S(){wt.scrollTop(Ut)}function x(e){e.click(k).mousedown(sn)}function T(e){e.click(k).mousedown(K)}function k(e){if(!Gt("selectable")){var t=Math.min(Bt-1,Math.floor((e.pageX-et.offset().left-At)/Ot)),n=un(0,t),r=this.parentNode.className.match(/fc-slot(\d+)/);if(r){var i=parseInt(r[1])*Gt("slotMinutes"),s=Math.floor(i/60);n.setHours(s),n.setMinutes(i%60+Xt),Yt("dayClick",ot[t],n,!1,e)}else Yt("dayClick",ot[t],n,!0,e)}}function L(e,t,n){n&&Ft.build();for(var r=fn(e,t),i=0;r.length>i;i++){var s=r[i];x(A(s.row,s.leftCol,s.row,s.rightCol))}}function A(e,t,n,r){var i=Ft.rect(e,t,n,r,mt);return en(i,mt)}function O(e,t){for(var n=0;Bt>n;n++){var r=un(0,n),i=a(h(r),1),s=new Date(Math.max(r,e)),o=new Date(Math.min(i,t));if(o>s){var u=Ft.rect(0,n,0,n,St),f=I(r,s),l=I(r,o);u.top=f,u.height=l-f,T(en(u,St))}}}function _(e){return qt.left(e)}function D(e){return Rt.left(e)}function P(e){return qt.right(e)}function H(e){return Rt.right(e)}function B(e){return Gt("allDaySlot")&&!e.row}function F(e){var t=un(0,e.col),n=e.row;return Gt("allDaySlot")&&n--,n>=0&&l(t,Xt+n*Dt),t}function I(e,n){if(e=h(e,!0),l(h(e),Xt)>n)return 0;if(n>=l(h(e),Vt))return Tt.height();var r=Gt("slotMinutes"),i=60*n.getHours()+n.getMinutes()-Xt,s=Math.floor(i/r),o=cn[s];return o===t&&(o=cn[s]=Tt.find("tr:eq("+s+") td div")[0].offsetTop),Math.max(0,Math.round(o-1+_t*(i%r/r)))}function q(){return bt}function W(e){var t=h(e.start);return e.allDay?t:l(t,Gt("defaultEventMinutes"))}function X(e,t){return t?h(e):l(h(e),Gt("slotMinutes"))}function V(e,t,n){n?Gt("allDaySlot")&&L(e,a(h(t),1),!0):$(e,t)}function $(t,n){var r=Gt("selectHelper");if(Ft.build(),r){var i=an(t).col;if(i>=0&&Bt>i){var s=Ft.rect(0,i,0,i,St),o=I(t,t),u=I(t,n);if(u>o){if(s.top=o,s.height=u-o,s.left+=2,s.width-=5,e.isFunction(r)){var a=r(t,n);a&&(s.position="absolute",s.zIndex=8,Ct=e(a).css(s).appendTo(St))}else s.isStart=!0,s.isEnd=!0,Ct=e(on({title:"",start:t,end:n,className:["fc-select-helper"],editable:!1},s)),Ct.css("opacity",Gt("dragOpacity"));Ct&&(T(Ct),St.append(Ct),N(Ct,s.width,!0),C(Ct,s.height,!0))}}}else O(t,n)}function J(){tn(),Ct&&(Ct.remove(),Ct=null)}function K(t){if(1==t.which&&Gt("selectable")){rn(t);var n;It.start(function(e,t){if(J(),e&&e.col==t.col&&!B(e)){var r=F(t),i=F(e);n=[r,l(h(r),Dt),i,l(h(i),Dt)].sort(j),$(n[0],n[3])}else n=null},t),e(document).one("mouseup",function(e){It.stop(),n&&(+n[0]==+n[1]&&Q(n[0],!1,e),nn(n[0],n[3],!1,e))})}}function Q(e,t,n){Yt("dayClick",ot[an(e).col],e,t,n)}function G(e,t){It.start(function(e){if(tn(),e)if(B(e))A(e.row,e.col,e.row,e.col);else{var t=F(e),n=l(h(t),Gt("defaultEventMinutes"));O(t,n)}},t)}function Y(e,t,n){var r=It.stop();tn(),r&&Yt("drop",e,F(r),B(r),t,n)}var Z=this;Z.renderAgenda=s,Z.setWidth=b,Z.setHeight=g,Z.beforeHide=E,Z.afterShow=S,Z.defaultEventEnd=W,Z.timePosition=I,Z.getIsCellAllDay=B,Z.allDayRow=q,Z.getHoverListener=function(){return It},Z.colLeft=_,Z.colRight=P,Z.colContentLeft=D,Z.colContentRight=H,Z.getDaySegmentContainer=function(){return gt},Z.getSlotSegmentContainer=function(){return xt},Z.getMinMinute=function(){return Xt},Z.getMaxMinute=function(){return Vt},Z.getSlotContainer=function(){return St},Z.getRowCnt=function(){return 1},Z.getColCnt=function(){return Bt},Z.getColWidth=function(){return Ot},Z.getSnapHeight=function(){return Ht},Z.getSnapMinutes=function(){return Dt},Z.defaultSelectionEnd=X,Z.renderDayOverlay=L,Z.renderSelection=V,Z.clearSelection=J,Z.reportDayClick=Q,Z.dragStart=G,Z.dragStop=Y,st.call(Z,n,r,i),lt.call(Z),ft.call(Z),tt.call(Z);var et,nt,rt,it,ot,ut,at,pt,vt,mt,gt,yt,bt,wt,St,xt,Tt,Nt,Ct,kt,Lt,At,Ot,Mt,_t,Dt,Pt,Ht,Bt,jt,Ft,It,qt,Rt,Ut,zt,Wt,Xt,Vt,$t,Jt,Kt,Qt,Gt=Z.opt,Yt=Z.trigger,Zt=Z.clearEvents,en=Z.renderOverlay,tn=Z.clearOverlays,nn=Z.reportSelection,rn=Z.unselect,sn=Z.daySelectionMousedown,on=Z.slotSegHtml,un=Z.cellToDate,an=Z.dateToCell,fn=Z.rangeToSegments,ln=r.formatDate,cn={};U(n.addClass("fc-agenda")),Ft=new ct(function(t,n){function r(e){return Math.max(a,Math.min(f,e))}var i,s,o;rt.each(function(t,r){i=e(r),s=i.offset().left,t&&(o[1]=s),o=[s],n[t]=o}),o[1]=s+i.outerWidth(),Gt("allDaySlot")&&(i=bt,s=i.offset().top,t[0]=[s,s+i.outerHeight()]);for(var u=St.offset().top,a=wt.offset().top,f=a+wt.outerHeight(),l=0;jt*Pt>l;l++)t.push([r(u+Ht*l),r(u+Ht*(l+1))])}),It=new ht(Ft),qt=new dt(function(e){return ut.eq(e)}),Rt=new dt(function(e){return at.eq(e)})}function tt(){function n(e,t){N(e);var n,r=e.length,s=[],o=[];for(n=0;r>n;n++)e[n].allDay?s.push(e[n]):o.push(e[n]);y("allDaySlot")&&(it(s,t),O()),u(i(o),t),b("eventAfterAllRender")}function r(){L(),_().empty(),D().empty()}function i(t){var n,r,i,u,a,f,c,p=z(),d=B(),v=H(),m=e.map(t,o),g=[];for(r=0;p>r;r++)for(n=q(0,r),l(n,d),i=nt(s(t,m,n,l(h(n),v-d))),rt(i),u=0;i.length>u;u++)for(a=i[u],f=0;a.length>f;f++)c=a[f],c.col=r,c.level=u,g.push(c);return g}function s(e,t,n,r){var i,s,o,u,a,f,l,c,p=[],d=e.length;for(i=0;d>i;i++)s=e[i],o=s.start,u=t[i],u>n&&r>o&&(n>o?(a=h(n),l=!1):(a=o,l=!0),u>r?(f=h(r),c=!1):(f=u,c=!0),p.push({event:s,start:a,end:f,isStart:l,isEnd:c,msLength:f-a}));return p.sort(U)}function o(e){return e.end?h(e.end):l(h(e.start),y("defaultEventMinutes"))}function u(n,r){var i,s,o,u,a,l,h,p,d,v,m,g,w,E,S,x,N,C,L,A=n.length,O="",_=D();for(L=(C=y("isRTL"))?-1:1,i=0;A>i;i++)s=n[i],o=s.event,u=j(s.start,s.start),a=j(s.start,s.end),l=s.col,h=s.level,p=s.forward||0,d=F(l),v=I(l)-d,v=Math.min(v-6,.95*v),m=h?v/(h+p+1):p?2*(v/(p+1)-6):v,g=d+v/(h+p+1)*h*L+(C?v-m:0),s.top=u,s.left=g,s.outerWidth=m,s.outerHeight=a-u,O+=f(o,s);for(_[0].innerHTML=O,w=_.children(),i=0;A>i;i++)s=n[i],o=s.event,E=e(w[i]),S=b("eventRender",o,o,E),S===!1?E.remove():(S&&S!==!0&&(E.remove(),E=e(S).css({position:"absolute",top:s.top,left:s.left}).appendTo(_)),s.element=E,o._id===r?c(o,E,s):E[0]._fci=i,K(o,E));for(T(_,n,c),i=0;A>i;i++)s=n[i],(E=s.element)&&(s.vsides=M(E,!0),s.hsides=k(E,!0),x=E.find(".fc-event-title"),x.length&&(s.contentTop=x[0].offsetTop));for(i=0;A>i;i++)s=n[i],(E=s.element)&&(E[0].style.width=Math.max(0,s.outerWidth-s.hsides)+"px",N=Math.max(0,s.outerHeight-s.vsides),E[0].style.height=N+"px",o=s.event,s.contentTop!==t&&10>N-s.contentTop&&(E.find("div.fc-event-time").text(ut(o.start,y("timeFormat"))+" - "+o.title),E.find("div.fc-event-title").remove()),b("eventAfterRender",o,o,E))}function f(e,t){var n="<",r=e.url,i=W(e,y),s=["fc-event","fc-event-vert"];return w(e)&&s.push("fc-event-draggable"),t.isStart&&s.push("fc-event-start"),t.isEnd&&s.push("fc-event-end"),s=s.concat(e.className),e.source&&(s=s.concat(e.source.className||[])),n+=r?"a href='"+R(e.url)+"'":"div",n+=" class='"+s.join(" ")+"'"+" style='position:absolute;z-index:8;top:"+t.top+"px;left:"+t.left+"px;"+i+"'"+">"+"<div class='fc-event-inner'>"+"<div class='fc-event-time'>"+R(at(e.start,e.end,y("timeFormat")))+"</div>"+"<div class='fc-event-title'>"+R(e.title)+"</div>"+"</div>"+"<div class='fc-event-bg'></div>",t.isEnd&&E(e)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(r?"a":"div")+">"}function c(e,t,n){var r=t.find("div.fc-event-time");w(e)&&v(e,t,r),n.isEnd&&E(e)&&m(e,t,r),A(e,t)}function p(e,t,n){function r(){f||(t.width(i).height("").draggable("option","grid",null),f=!0)}var i,s,o,u=n.isStart,f=!0,l=P(),c=X(),p=V(),v=$(),m=B();t.draggable({zIndex:9,opacity:y("dragOpacity","month"),revertDuration:y("dragRevertDuration"),start:function(n,m){b("eventDragStart",t,e,n,m),G(e,t),i=t.width(),l.start(function(n,i){if(tt(),n){s=!1;var l=q(0,i.col),m=q(0,n.col);o=d(m,l),n.row?u?f&&(t.width(c-10),C(t,p*Math.round((e.end?(e.end-e.start)/Tt:y("defaultEventMinutes"))/v)),t.draggable("option","grid",[c,1]),f=!1):s=!0:(et(a(h(e.start),o),a(S(e),o)),r()),s=s||f&&!o}else r(),s=!0;t.draggable("option","revert",s)},n,"drag")},stop:function(n,i){if(l.stop(),tt(),b("eventDragStop",t,e,n,i),s)r(),t.css("filter",""),Q(e,t);else{var u=0;f||(u=Math.round((t.offset().top-J().offset().top)/p)*v+m-(60*e.start.getHours()+e.start.getMinutes())),Y(this,e,o,u,f,n,i)}}})}function v(e,t,n){function r(t){var r,i=l(h(e.start),t);e.end&&(r=l(h(e.end),t)),n.text(at(i,r,y("timeFormat")))}function i(){c&&(n.css("display",""),t.draggable("option","grid",[m,g]),c=!1
)}var s,o,u,f,c=!1,p=P(),v=z(),m=X(),g=V(),w=$();t.draggable({zIndex:9,scroll:!1,grid:[m,g],axis:1==v?"y":!1,opacity:y("dragOpacity"),revertDuration:y("dragRevertDuration"),start:function(r,l){b("eventDragStart",t,e,r,l),G(e,t),s=t.position(),u=f=0,p.start(function(r,s){if(t.draggable("option","revert",!r),tt(),r){var u=q(0,s.col),f=q(0,r.col);o=d(f,u),y("allDaySlot")&&!r.row?(c||(c=!0,n.hide(),t.draggable("option","grid",null)),et(a(h(e.start),o),a(S(e),o))):i()}},r,"drag")},drag:function(e,t){u=Math.round((t.position.top-s.top)/g)*w,u!=f&&(c||r(u),f=u)},stop:function(n,a){var f=p.stop();tt(),b("eventDragStop",t,e,n,a),f&&(o||u||c)?Y(this,e,o,c?0:u,c,n,a):(i(),t.css("filter",""),t.css(s),r(0),Q(e,t))}})}function m(e,t,n){var r,i,s=V(),o=$();t.resizable({handles:{s:".ui-resizable-handle"},grid:s,start:function(n,s){r=i=0,G(e,t),t.css("z-index",9),b("eventResizeStart",this,e,n,s)},resize:function(u,a){r=Math.round((Math.max(s,t.height())-a.originalSize.height)/s),r!=i&&(n.text(at(e.start,r||e.end?l(x(e),o*r):null,y("timeFormat"))),i=r)},stop:function(n,i){b("eventResizeStop",this,e,n,i),r?Z(this,e,0,o*r,n,i):(t.css("z-index",8),Q(e,t))}})}var g=this;g.renderEvents=n,g.clearEvents=r,g.slotSegHtml=f,ot.call(g);var y=g.opt,b=g.trigger,w=g.isEventDraggable,E=g.isEventResizable,x=g.eventEnd,N=g.reportEvents,L=g.reportEventClear,A=g.eventElementHandlers,O=g.setHeight,_=g.getDaySegmentContainer,D=g.getSlotSegmentContainer,P=g.getHoverListener,H=g.getMaxMinute,B=g.getMinMinute,j=g.timePosition,F=g.colContentLeft,I=g.colContentRight,q=g.cellToDate,U=g.segmentCompare,z=g.getColCnt,X=g.getColWidth,V=g.getSnapHeight,$=g.getSnapMinutes,J=g.getSlotContainer,K=g.reportEventElement,Q=g.showEvents,G=g.hideEvents,Y=g.eventDrop,Z=g.eventResize,et=g.renderDayOverlay,tt=g.clearOverlays,it=g.renderDayEvents,st=g.calendar,ut=st.formatDate,at=st.formatDates;g.draggableDayEvent=p}function nt(e){var t,n,r,i,s,o=[],u=e.length;for(t=0;u>t;t++){for(n=e[t],r=0;;){if(i=!1,o[r])for(s=0;o[r].length>s;s++)if(it(o[r][s],n)){i=!0;break}if(!i)break;r++}o[r]?o[r].push(n):o[r]=[n]}return o}function rt(e){var t,n,r,i,s,o;for(t=e.length-1;t>0;t--)for(i=e[t],n=0;i.length>n;n++)for(s=i[n],r=0;e[t-1].length>r;r++)o=e[t-1][r],it(s,o)&&(o.forward=Math.max(o.forward||0,(s.forward||0)+1))}function it(e,t){return e.end>t.start&&e.start<t.end}function st(n,r,i){function s(t,n){var r=K[t];return e.isPlainObject(r)?q(r,n||i):r}function o(e,t){return r.trigger.apply(r,[e,t||R].concat(Array.prototype.slice.call(arguments,2),[R]))}function u(e){return c(e)&&!s("disableDragging")}function f(e){return c(e)&&!s("disableResizing")}function c(e){return V(e.editable,(e.source||{}).editable,s("editable"))}function p(e){X={};var t,n,r=e.length;for(t=0;r>t;t++)n=e[t],X[n._id]?X[n._id].push(n):X[n._id]=[n]}function v(e){return e.end?h(e.end):U(e)}function m(e,t){$.push(t),J[e._id]?J[e._id].push(t):J[e._id]=[t]}function g(){$=[],J={}}function y(e,n){n.click(function(r){return n.hasClass("ui-draggable-dragging")||n.hasClass("ui-resizable-resizing")?t:o("eventClick",this,e,r)}).hover(function(t){o("eventMouseover",this,e,t)},function(t){o("eventMouseout",this,e,t)})}function b(e,t){E(e,t,"show")}function w(e,t){E(e,t,"hide")}function E(e,t,n){var r,i=J[e._id],s=i.length;for(r=0;s>r;r++)t&&i[r][0]==t[0]||i[r][n]()}function S(e,t,n,r,i,s,u){var a=t.allDay,f=t._id;T(X[f],n,r,i),o("eventDrop",e,t,n,r,i,function(){T(X[f],-n,-r,a),W(f)},s,u),W(f)}function x(e,t,n,r,i,s){var u=t._id;N(X[u],n,r),o("eventResize",e,t,n,r,function(){N(X[u],-n,-r),W(u)},i,s),W(u)}function T(e,n,r,i){r=r||0;for(var s,o=e.length,u=0;o>u;u++)s=e[u],i!==t&&(s.allDay=i),l(a(s.start,n,!0),r),s.end&&(s.end=l(a(s.end,n,!0),r)),z(s,K)}function N(e,t,n){n=n||0;for(var r,i=e.length,s=0;i>s;s++)r=e[s],r.end=l(a(v(r),t,!0),n),z(r,K)}function C(e){return"object"==typeof e&&(e=e.getDay()),Y[e]}function k(){return Q}function L(e,t,n){for(t=t||1;Y[(e.getDay()+(n?t:0)+7)%7];)a(e,t)}function A(){var e=O.apply(null,arguments),t=M(e),n=_(t);return n}function O(e,t){var n=R.getColCnt(),r=tt?-1:1,i=tt?n-1:0;"object"==typeof e&&(t=e.col,e=e.row);var s=e*n+(t*r+i);return s}function M(e){var t=R.visStart.getDay();return e+=Z[t],7*Math.floor(e/Q)+et[(e%Q+Q)%Q]-t}function _(e){var t=h(R.visStart);return a(t,e),t}function D(e){var t=P(e),n=H(t),r=B(n);return r}function P(e){return d(e,R.visStart)}function H(e){var t=R.visStart.getDay();return e+=t,Math.floor(e/7)*Q+Z[(e%7+7)%7]-Z[t]}function B(e){var t=R.getColCnt(),n=tt?-1:1,r=tt?t-1:0,i=Math.floor(e/t),s=(e%t+t)%t*n+r;return{row:i,col:s}}function j(e,t){for(var n=R.getRowCnt(),r=R.getColCnt(),i=[],s=P(e),o=P(t),u=H(s),a=H(o)-1,f=0;n>f;f++){var l=f*r,c=l+r-1,h=Math.max(u,l),p=Math.min(a,c);if(p>=h){var d=B(h),v=B(p),m=[d.col,v.col].sort(),g=M(h)==s,y=M(p)+1==o;i.push({row:f,leftCol:m[0],rightCol:m[1],isStart:g,isEnd:y})}}return i}function F(e,t){return I(e,t)||e.event.start-t.event.start||(e.event.title||"").localeCompare(t.event.title)}function I(e,t){return"msLength"in e?t.msLength-e.msLength:t.rightCol-t.leftCol-(e.rightCol-e.leftCol)||t.event.allDay-e.event.allDay}var R=this;R.element=n,R.calendar=r,R.name=i,R.opt=s,R.trigger=o,R.isEventDraggable=u,R.isEventResizable=f,R.reportEvents=p,R.eventEnd=v,R.reportEventElement=m,R.reportEventClear=g,R.eventElementHandlers=y,R.showEvents=b,R.hideEvents=w,R.eventDrop=S,R.eventResize=x;var U=R.defaultEventEnd,z=r.normalizeEvent,W=r.reportEventChange,X={},$=[],J={},K=r.options;R.isHiddenDay=C,R.skipHiddenDays=L,R.getCellsPerWeek=k,R.dateToCell=D,R.dateToDayOffset=P,R.dayOffsetToCellOffset=H,R.cellOffsetToCell=B,R.cellToDate=A,R.cellToCellOffset=O,R.cellOffsetToDayOffset=M,R.dayOffsetToDate=_,R.rangeToSegments=j,R.segmentCompare=F;var Q,G=s("hiddenDays")||[],Y=[],Z=[],et=[],tt=s("isRTL");(function(){s("weekends")===!1&&G.push(0,6);for(var t=0,n=0;7>t;t++)Z[t]=n,Y[t]=-1!=e.inArray(t,G),Y[t]||(et[n]=t,n++);if(Q=n,!Q)throw"invalid hiddenDays"})()}function ot(){function t(e,t){var n=r(e,!1,!0);at(n,function(e,t){_(e.event,t)}),b(n,t),at(n,function(e,t){L("eventAfterRender",e.event,e.event,t)})}function n(e,t,n){var i=r([e],!0,!1),s=[];return at(i,function(e,r){e.row===t&&r.css("top",n),s.push(r[0])}),s}function r(t,n,r){var s,a,f=K(),h=n?e("<div/>"):f,p=i(t);return o(p),s=u(p),h[0].innerHTML=s,a=h.children(),n&&f.append(a),l(p,a),at(p,function(e,t){e.hsides=k(t,!0)}),at(p,function(e,t){t.width(Math.max(0,e.outerWidth-e.hsides))}),at(p,function(e,t){e.outerHeight=t.outerHeight(!0)}),c(p,r),p}function i(e){for(var t=[],n=0;e.length>n;n++){var r=s(e[n]);t.push.apply(t,r)}return t}function s(e){for(var t=e.start,n=S(e),r=tt(t,n),i=0;r.length>i;i++)r[i].event=e;return r}function o(e){for(var t=C("isRTL"),n=0;e.length>n;n++){var r=e[n],i=(t?r.isEnd:r.isStart)?$:X,s=(t?r.isStart:r.isEnd)?J:V,o=i(r.leftCol),u=s(r.rightCol);r.left=o,r.outerWidth=u-o}}function u(e){for(var t="",n=0;e.length>n;n++)t+=f(e[n]);return t}function f(e){var t="",n=C("isRTL"),r=e.event,i=r.url,s=["fc-event","fc-event-hori"];A(r)&&s.push("fc-event-draggable"),e.isStart&&s.push("fc-event-start"),e.isEnd&&s.push("fc-event-end"),s=s.concat(r.className),r.source&&(s=s.concat(r.source.className||[]));var o=W(r,C);return t+=i?"<a href='"+R(i)+"'":"<div",t+=" class='"+s.join(" ")+"'"+" style="+"'"+"position:absolute;"+"z-index:8;"+"left:"+e.left+"px;"+o+"'"+">"+"<div class='fc-event-inner'>",!r.allDay&&e.isStart&&(t+="<span class='fc-event-time'>"+R(Q(r.start,r.end,C("timeFormat")))+"</span>"),t+="<span class='fc-event-title'>"+R(r.title)+"</span>"+"</div>",e.isEnd&&O(r)&&(t+="<div class='ui-resizable-handle ui-resizable-"+(n?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),t+="</"+(i?"a":"div")+">"}function l(t,n){for(var r=0;t.length>r;r++){var i=t[r],s=i.event,o=n.eq(r),u=L("eventRender",s,s,o);u===!1?o.remove():(u&&u!==!0&&(u=e(u).css({position:"absolute",zIndex:8,left:i.left}),o.replaceWith(u),o=u),i.element=o)}}function c(e,t){var n=p(e),r=y(),i=[];if(t)for(var s=0;r.length>s;s++)r[s].height(n[s]);for(var s=0;r.length>s;s++)i.push(r[s].position().top);at(e,function(e,t){t.css("top",i[e.row]+e.top)})}function p(e){for(var t=I(),n=q(),r=[],i=v(e),s=0;t>s;s++){for(var o=i[s],u=[],a=0;n>a;a++)u.push(0);for(var f=0;o.length>f;f++){var l=o[f];l.top=F(u.slice(l.leftCol,l.rightCol+1));for(var a=l.leftCol;l.rightCol>=a;a++)u[a]=l.top+l.outerHeight}r.push(F(u))}return r}function v(e){var t,n,r,i=I(),s=[];for(t=0;e.length>t;t++)n=e[t],r=n.row,n.element&&(s[r]?s[r].push(n):s[r]=[n]);for(r=0;i>r;r++)s[r]=m(s[r]||[]);return s}function m(e){for(var t=[],n=g(e),r=0;n.length>r;r++)t.push.apply(t,n[r]);return t}function g(e){e.sort(nt);for(var t=[],n=0;e.length>n;n++){for(var r=e[n],i=0;t.length>i&&ut(r,t[i]);i++);t[i]?t[i].push(r):t[i]=[r]}return t}function y(){var e,t=I(),n=[];for(e=0;t>e;e++)n[e]=z(e).find("div.fc-day-content > div");return n}function b(e,t){var n=K();at(e,function(e,n,r){var i=e.event;i._id===t?w(i,n,e):n[0]._fci=r}),T(n,e,w)}function w(e,t,n){A(e)&&N.draggableDayEvent(e,t,n),n.isEnd&&O(e)&&N.resizableDayEvent(e,t,n),D(e,t)}function E(e,t){var n,r=et();t.draggable({zIndex:9,delay:50,opacity:C("dragOpacity"),revertDuration:C("dragRevertDuration"),start:function(i,s){L("eventDragStart",t,e,i,s),H(e,t),r.start(function(r,i,s,o){if(t.draggable("option","revert",!r||!s&&!o),Y(),r){var u=rt(i),f=rt(r);n=d(f,u),G(a(h(e.start),n),a(S(e),n))}else n=0},i,"drag")},stop:function(i,s){r.stop(),Y(),L("eventDragStop",t,e,i,s),n?B(this,e,n,0,e.allDay,i,s):(t.css("filter",""),P(e,t))}})}function x(t,r,i){var s=C("isRTL"),o=s?"w":"e",u=r.find(".ui-resizable-"+o),f=!1;U(r),r.mousedown(function(e){e.preventDefault()}).click(function(e){f&&(e.preventDefault(),e.stopImmediatePropagation())}),u.mousedown(function(s){function u(n){L("eventResizeStop",this,t,n),e("body").css("cursor",""),l.stop(),Y(),c&&j(this,t,c,0,n),setTimeout(function(){f=!1},0)}if(1==s.which){f=!0;var l=et();I(),q();var c,h,p=r.css("top"),d=e.extend({},t),v=ft(ot(t.start));Z(),e("body").css("cursor",o+"-resize").one("mouseup",u),L("eventResizeStart",this,t,s),l.start(function(r,s){if(r){var u=it(s),f=it(r);if(f=Math.max(f,v),c=st(f)-st(u)){d.end=a(M(t),c,!0);var l=h;h=n(d,i.row,p),h=e(h),h.find("*").css("cursor",o+"-resize"),l&&l.remove(),H(t)}else h&&(P(t),h.remove(),h=null);Y(),G(t.start,a(S(t),c))}},s)}})}var N=this;N.renderDayEvents=t,N.draggableDayEvent=E,N.resizableDayEvent=x;var C=N.opt,L=N.trigger,A=N.isEventDraggable,O=N.isEventResizable,M=N.eventEnd,_=N.reportEventElement,D=N.eventElementHandlers,P=N.showEvents,H=N.hideEvents,B=N.eventDrop,j=N.eventResize,I=N.getRowCnt,q=N.getColCnt;N.getColWidth;var z=N.allDayRow,X=N.colLeft,V=N.colRight,$=N.colContentLeft,J=N.colContentRight;N.dateToCell;var K=N.getDaySegmentContainer,Q=N.calendar.formatDates,G=N.renderDayOverlay,Y=N.clearOverlays,Z=N.clearSelection,et=N.getHoverListener,tt=N.rangeToSegments,nt=N.segmentCompare,rt=N.cellToDate,it=N.cellToCellOffset,st=N.cellOffsetToDayOffset,ot=N.dateToDayOffset,ft=N.dayOffsetToCellOffset}function ut(e,t){for(var n=0;t.length>n;n++){var r=t[n];if(r.leftCol<=e.rightCol&&r.rightCol>=e.leftCol)return!0}return!1}function at(e,t){for(var n=0;e.length>n;n++){var r=e[n],i=r.element;i&&t(r,i,n)}}function ft(){function t(e,t,i){n(),t||(t=a(e,i)),f(e,t,i),r(e,t,i)}function n(e){c&&(c=!1,l(),u("unselect",null,e))}function r(e,t,n,r){c=!0,u("select",null,e,t,n,r)}function i(t){var i=s.cellToDate,u=s.getIsCellAllDay,a=s.getHoverListener(),c=s.reportDayClick;if(1==t.which&&o("selectable")){n(t);var h;a.start(function(e,t){l(),e&&u(e)?(h=[i(t),i(e)].sort(j),f(h[0],h[1],!0)):h=null},t),e(document).one("mouseup",function(e){a.stop(),h&&(+h[0]==+h[1]&&c(h[0],!0,e),r(h[0],h[1],!0,e))})}}var s=this;s.select=t,s.unselect=n,s.reportSelection=r,s.daySelectionMousedown=i;var o=s.opt,u=s.trigger,a=s.defaultSelectionEnd,f=s.renderSelection,l=s.clearSelection,c=!1;o("selectable")&&o("unselectAuto")&&e(document).mousedown(function(t){var r=o("unselectCancel");r&&e(t.target).parents(r).length||n(t)})}function lt(){function t(t,n){var r=s.shift();return r||(r=e("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),r[0].parentNode!=n[0]&&r.appendTo(n),i.push(r.css(t).show()),r}function n(){for(var e;e=i.shift();)s.push(e.hide().unbind())}var r=this;r.renderOverlay=t,r.clearOverlays=n;var i=[],s=[]}function ct(e){var t,n,r=this;r.build=function(){t=[],n=[],e(t,n)},r.cell=function(e,r){var i,s=t.length,o=n.length,u=-1,a=-1;for(i=0;s>i;i++)if(r>=t[i][0]&&t[i][1]>r){u=i;break}for(i=0;o>i;i++)if(e>=n[i][0]&&n[i][1]>e){a=i;break}return u>=0&&a>=0?{row:u,col:a}:null},r.rect=function(e,r,i,s,o){var u=o.offset();return{top:t[e][0]-u.top,left:n[r][0]-u.left,width:n[s][1]-n[r][0],height:t[i][1]-t[e][0]}}}function ht(t){function n(e){pt(e);var n=t.cell(e.pageX,e.pageY);(!n!=!o||n&&(n.row!=o.row||n.col!=o.col))&&(n?(s||(s=n),i(n,s,n.row-s.row,n.col-s.col)):i(n,s),o=n)}var r,i,s,o,u=this;u.start=function(u,a,f){i=u,s=o=null,t.build(),n(a),r=f||"mousemove",e(document).bind(r,n)},u.stop=function(){return e(document).unbind(r,n),o}}function pt(e){e.pageX===t&&(e.pageX=e.originalEvent.pageX,e.pageY=e.originalEvent.pageY)}function dt(e){function n(t){return i[t]=i[t]||e(t)}var r=this,i={},s={},o={};r.left=function(e){return s[e]=s[e]===t?n(e).position().left:s[e]},r.right=function(e){return o[e]=o[e]===t?r.left(e)+n(e).width():o[e]},r.clear=function(){i={},s={},o={}}}var vt={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},mt={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},gt=e.fullCalendar={version:"1.6.2"},yt=gt.views={};e.fn.fullCalendar=function(n){if("string"==typeof n){var i,s=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=e.data(this,"fullCalendar");if(r&&e.isFunction(r[n])){var o=r[n].apply(r,s);i===t&&(i=o),"destroy"==n&&e.removeData(this,"fullCalendar")}}),i!==t?i:this}var o=n.eventSources||[];return delete n.eventSources,n.events&&(o.push(n.events),delete n.events),n=e.extend(!0,{},vt,n.isRTL||n.isRTL===t&&vt.isRTL?mt:{},n),this.each(function(t,i){var s=e(i),u=new r(s,n,o);s.data("fullCalendar",u),u.render()}),this},gt.sourceNormalizers=[],gt.sourceFetchers=[];var bt={dataType:"json",cache:!1},wt=1;gt.addDays=a,gt.cloneDate=h,gt.parseDate=m,gt.parseISO8601=g,gt.parseTime=y,gt.formatDate=b,gt.formatDates=w;var Et=["sun","mon","tue","wed","thu","fri","sat"],St=864e5,xt=36e5,Tt=6e4,Nt={s:function(e){return e.getSeconds()},ss:function(e){return I(e.getSeconds())},m:function(e){return e.getMinutes()},mm:function(e){return I(e.getMinutes())},h:function(e){return e.getHours()%12||12},hh:function(e){return I(e.getHours()%12||12)},H:function(e){return e.getHours()},HH:function(e){return I(e.getHours())},d:function(e){return e.getDate()},dd:function(e){return I(e.getDate())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return e.getMonth()+1},MM:function(e){return I(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},yy:function(e){return(e.getFullYear()+"").substring(2)},yyyy:function(e){return e.getFullYear()},t:function(e){return 12>e.getHours()?"a":"p"},tt:function(e){return 12>e.getHours()?"am":"pm"},T:function(e){return 12>e.getHours()?"A":"P"},TT:function(e){return 12>e.getHours()?"AM":"PM"},u:function(e){return b(e,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(e){var t=e.getDate();return t>10&&20>t?"th":["st","nd","rd"][t%10-1]||"th"},w:function(e,t){return t.weekNumberCalculation(e)},W:function(e){return E(e)}};gt.dateFormatters=Nt,gt.applyAll=X,yt.month=$,yt.basicWeek=J,yt.basicDay=K,n({weekMode:"fixed"}),yt.agendaWeek=Y,yt.agendaDay=Z,n({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24})})(jQuery);